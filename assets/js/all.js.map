{"version":3,"sources":["all.js"],"names":["txt","document","querySelector","list","addBtn","clearBtn","allTabs","querySelectorAll","data","JSON","parse","localStorage","getItem","toggleTab","updateTodos","addEventListener","addTask","e","preventDefault","value","trim","taskObj","id","Date","getTime","checked","unshift","forEach","item","classList","remove","add","updateLocalStorage","renderData","str","index","content","innerHTML","deleteAndChecked","idNum","parseInt","target","closest","dataset","num","contains","deleteIndex","findIndex","splice","tab","changeTab","setAttribute","updateList","showData","filter","totalNum","dataLen","length","textContent","enableClearBtn","clearAllDone","key","setItem","stringify","bg","switchBtn","switchBgMode"],"mappings":"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","file":"all.js","sourcesContent":["const txt = document.querySelector('.txt');\nconst list = document.querySelector('.list');\nconst addBtn = document.querySelector('.btn_add');\nconst clearBtn = document.querySelector(\".clearBtn\");\nconst allTabs = document.querySelectorAll(\".tab li\");\n\n//預設資料庫\nlet data = JSON.parse(localStorage.getItem('todos')) || [];\n\n// 預設為第一個 tab 為全部 放在前面才會一直在add的時候也會在all\nlet toggleTab = \"all\"; \n\n//初始化頁面\n\nupdateTodos();\n\n\naddBtn.addEventListener('click', addTask, false);\n\nfunction addTask(e){\n  e.preventDefault();\n  if(txt.value.trim()== \"\"){\n    return ;\n  };\n\n  let taskObj = {\n    txt:  txt.value,\n    id: new Date().getTime(),\n    checked : ''\n  };\n  data.unshift(taskObj);\n  txt.value = \"\";\n  \n  //將頁籤切換回全部\n  if(toggleTab !== \"all\"){\n    allTabs.forEach(function(item){\n      item.classList.remove(\"active\");\n    });\n    \n    allTabs[0].classList.add(\"active\");\n    toggleTab = \"all\";\n  };\n\n  updateTodos();\n  updateLocalStorage(data);\n}\n\n//渲染\nfunction renderData(data){\n  \n  let str ='';\n  data.forEach(function(item,index){\n    \n    //不能放index 會根據刪除而有改變，要放item.id 才會有唯一性\n    let content = `<li data-num = \"${item.id}\">\n          <label class=\"checkbox\" for=\"check\">\n            <input type=\"checkbox\" id=\"check\" ${item.checked}/>\n            <span>${item.txt}</span>\n          </label>\n          <a href=\"#\" class=\"delete\"></a>\n        </li>`;\n    str += content;\n    \n  })\n  list.innerHTML = str ;\n}\n\n\nlist.addEventListener('click', deleteAndChecked, false);\n\n//刪除與勾選狀態更新到data 上方\nfunction deleteAndChecked(e){\n  \n  let idNum = parseInt(e.target.closest(\"li\").dataset.num);\n  //刪除資料\n  if(e.target.classList.contains(\"delete\")){\n  e.preventDefault();\n\n  //透過陣法方法 findIndex 比對 todoData 內的 id 是否等於點擊到的 id\n  let deleteIndex = data.findIndex(function(item){\n    return item.id === idNum\n  });\n  \n  //將原本用時間設定的id 數字，轉為索引值\n  data.splice(deleteIndex,1);  \n\n  }else{\n  data.forEach(function(item){\n    if(idNum === item.id){\n      if(item.checked === \"checked\"){\n        item.checked = \"\";\n      }else{\n        item.checked = \"checked\";\n      };\n    };\n  });\n    \n  };\n\n updateTodos();\n updateLocalStorage(data);\n\n}\n\n\n//9/2\n//監聽切換tab 狀態\nconst tab = document.querySelector(\".tab\");\n\ntab.addEventListener('click',changeTab, false);\n\nfunction changeTab(e){\n\n  allTabs.forEach(function(item){\n    item.setAttribute(\"class\",\"\");\n  });\n  e.target.setAttribute(\"class\",\"active\"); \n  toggleTab = e.target.dataset.tab;\n \n  updateTodos();\n  updateLocalStorage(data);\n\n}\n\n//9/2\n//修改完成狀態\n//點擊tab 區域，畫面渲染在list 區域\n//需要監聽更大範圍的card list\nconst updateList = document.querySelector('.card_list');\n\nfunction updateTodos(){\n\n  let showData=[];\n  \n  if(toggleTab ===\"all\"){\n    showData = data;\n   \n  }else if (toggleTab ===\"undone\"){\n    showData = data.filter(function(item){\n      return item.checked ===\"\";\n    });\n     \n  }else if (toggleTab ===\"done\"){\n    showData = data.filter(function(item){\n      return item.checked ===\"checked\";});\n    \n  };\n  \n  //計算總數\n  const totalNum = document.querySelector('.totalNum');\nlet dataLen = data.filter(function(item){\n  return item.checked === \"\";\n}).length;\n  \n  totalNum.textContent = dataLen;\n  //加入清除已完成項目按鈕\n  enableClearBtn(showData);\n  renderData(showData);\n  updateLocalStorage(showData);\n}\n\n\nfunction enableClearBtn(data){\n  //已完成項目按鈕顏色顯示\n    let dataLen = data.filter(function(item){\n      return item.checked ===\"\"; \n    }).length;\n    //清空按鈕效果 \n    const clearBtn = document.querySelector(\".clearBtn\");\n    //觸發已完成項目按鈕\n    if(data.length - dataLen === 0){\n      clearBtn.classList.remove(\"active\");      \n    }else if(data.length - dataLen > 0){\n      clearBtn.classList.add(\"active\");\n    };\n  \n\n}\n\n//清除已完成按鈕 刪除全部已完成事件\nclearBtn.addEventListener('click',clearAllDone, false);\n\nfunction clearAllDone(e){\n  e.preventDefault();\n  if(e.target.classList.contains(\"active\")){\n    data = data.filter(function(item){\n      return item.checked ===\"\";\n    });\n     }else{\n       return ;\n     };\n  \n  updateTodos();\n  updateLocalStorage(data);\n}\n\n//新增enter keyup\ntxt.addEventListener(\"keyup\",function(e){\n  \n  if(txt.value.trim() == \"\"){\n    return;\n  }else{\n    addBtn.classList.add(\"add-active\");\n    if(e.key ===\"Enter\"){\n    addTask(e); \n    addBtn.setAttribute(\"class\",\"btn_add\");\n  };\n  }\n   updateLocalStorage(data);\n});\n\n\nfunction updateLocalStorage(data){\n  localStorage.setItem('todos', JSON.stringify(data));\n}\n\n//切換背景顏色\nconst bg = document.querySelector(\".bg\");\nconst switchBtn = document.querySelector(\".switch-btn\");\n\nswitchBtn.addEventListener(\"click\", switchBgMode , false);\n\nfunction switchBgMode(e){\n  e.preventDefault();\n  if(!e.target.classList.contains(\"switch-btn\")){\n    return\n  };\n  if(!bg.classList.contains(\"night\")){\n    bg.classList.add(\"night\");\n    switchBtn.textContent =\"toggle_on\";\n  }else{\n    bg.setAttribute(\"class\",\"bg\");\n    switchBtn.textContent =\"toggle_off\";\n  };\n\n}"]}